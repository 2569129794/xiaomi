"use strict";$(function(){$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-list.php",data:{id:"1678"},dataType:"json",success:function(t){console.log(t);t=t.data;for(var n="",p=0;p<t.length;p++)n+='<li>\n                    <input class="ge" type="checkbox" checked/>\n                    <img src="'+t[p].pimg+'" alt=""/> \n                    <p class="name" pid="'+t[p].pid+'">'+t[p].pname+'</p>\n                    <p class="desc">'+t[p].pdesc+'</p>\n                    <p class="price"><span>'+t[p].pprice+'</span>元</p>\n                    <p class="number">\n                        <span class="jian btn">-</span>\n                        <span class="num">'+t[p].pnum+'</span>\n                        <span class="jia btn">+</span>\n                    </p>\n                    <span class="totalPrice"><span>'+Number(t[p].pprice)*Number(t[p].pnum)+'</span>.00元</span>\n                    <p class="del">x</p>\n                </li>';function a(){var t=0;$(".totalPrice span").each(function(){$(this).parent().parent().find("input").prop("checked")&&(t+=Number($(this).html()))}),$(".total span").html(t)}function e(){var t=0;$(".num").each(function(){t+=Number($(this).html())}),$(".tnum").html(t);var n=0;$(".ge").each(function(){$(this).prop("checked")&&(n+=Number($(this).parent().find(".num").html()))}),$(".snum").html(n),$.cookie("cartNum",n,{expires:10})}$(".list ul").html(n),e(),a(),$(".btn").click(function(){var t=0,n=0,p=Number($(this).parent().prev().find("span").html());n="jia btn"==$(this).attr("class")?(t=Number($(this).prev().html()),$(this).prev().html(t+1),Number($(this).prev().html())):((t=Number($(this).next().html()))<=1?$(this).next().html(1):$(this).next().html(t-1),Number($(this).next().html())),$(this).parent().next().find("span").html(p*n),a(),$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-update-num.php",data:{uid:"1678",pid:$(this).parent().parent().find(".name").attr("pid"),pnum:$(this).parent().find(".num").html()},dataType:"json",success:function(t){}}),e()}),$(".del").click(function(){var p=this;$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-delete.php",data:{uid:"1678",pid:$(p).parent().find(".name").attr("pid")},dataType:"json",success:function(t){var n=$(p).parent().index();$(p).parent().parent().find("li").eq(n).remove(),e()}})}),$(".list input").click(function(){if("quan"==$(this).attr("class")&&$(this).prop("checked")){$(this).prop("checked");$(".ge").prop("checked",!0)}else"ge"==$(this).attr("class")&&($(this).prop("checked")?$(".ge").each(function(){$(this).prop("checked")&&$(".quan").prop("checked",!0)}):$(".quan").prop("checked",!1));e(),a()})}})});